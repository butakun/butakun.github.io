<html>
  <head>
  </head>
  <body>
    <div>
      <canvas id="chart", width="100%"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module">
      const data = await fetch('https://butakun-getklik.web.val.run').then((r) => r.json());

      const ctx = document.getElementById('chart');

      var chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: data.map((d) => {
            const dt = new Date(d.datetime + 'Z');
            const hour = dt.getHours();
            if (hour == 0) {
              return dt.toDateString();
            } else {
              return "";
            }
          }),
          datasets: [{
            label: "KirsebÃ¦rvÃ¦nget",
            data: data.map((d) => d.count),
            }]
          },
        });
    </script>
  </body>
</html>
